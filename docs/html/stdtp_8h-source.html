<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>stdtp.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>stdtp.h</h1><div class="fragment"><pre>00001 <span class="comment">//-&lt; STDTP.H &gt;-------------------------------------------------------*--------*</span>
00002 <span class="comment">// FastDB                    Version 1.0         (c) 1999  GARRET    *     ?  *</span>
00003 <span class="comment">// (Main Memory Database Management System)                          *   /\|  *</span>
00004 <span class="comment">//                                                                   *  /  \  *</span>
00005 <span class="comment">//                          Created:     20-Nov-98    K.A. Knizhnik  * / [] \ *</span>
00006 <span class="comment">//                          Last update: 10-Dec-98    K.A. Knizhnik  * GARRET *</span>
00007 <span class="comment">//-------------------------------------------------------------------*--------*</span>
00008 <span class="comment">// Standart type and macro definitions</span>
00009 <span class="comment">//-------------------------------------------------------------------*--------*</span>
00010 
00011 <span class="preprocessor">#ifndef __STDTP_H__</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define __STDTP_H__</span>
00013 <span class="preprocessor"></span>
00014 <span class="preprocessor">#include "config.h"</span>
00015 
00016 <span class="preprocessor">#ifdef FASTDB_DLL</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#ifdef INSIDE_FASTDB</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#define FASTDB_DLL_ENTRY __declspec(dllexport)</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define FASTDB_DLL_ENTRY __declspec(dllimport)</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define FASTDB_DLL_ENTRY</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00025 <span class="preprocessor"></span>
00026 <span class="preprocessor">#ifdef USE_NAMESPACES</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define BEGIN_FASTDB_NAMESPACE namespace fastdb {</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define END_FASTDB_NAMESPACE }</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define USE_FASTDB_NAMESPACE using namespace fastdb;</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define FASTDB_NS fastdb</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#define BEGIN_FASTDB_NAMESPACE</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#define END_FASTDB_NAMESPACE</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define USE_FASTDB_NAMESPACE </span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define FASTDB_NS</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00037 <span class="preprocessor"></span>
00038 <span class="preprocessor">#if defined(AUTO_DETECT_PROCESS_CRASH) &amp;&amp; !defined(RECOVERABLE_CRITICAL_SECTION)</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define RECOVERABLE_CRITICAL_SECTION</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00041 <span class="preprocessor"></span>
00042 <span class="preprocessor">#define GNUC_BEFORE(major,minor) (defined(__GNUC__) &amp;&amp; (major &gt; __GNUC__ || (major == __GNUC__ &amp;&amp; minor &gt; __GNUC_MINOR__)))</span>
00043 <span class="preprocessor"></span>
00044 <span class="preprocessor">#if defined(__MINGW32__) &amp;&amp; !defined(_WIN32)</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define _WIN32</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00047 <span class="preprocessor"></span>
00048 <span class="preprocessor">#if defined(_WIN32_WCE) &amp;&amp; !defined(_WINCE)</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define _WINCE</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00051 <span class="preprocessor"></span>
00052 <span class="preprocessor">#if defined(__APPLE__) &amp;&amp; !defined(__FreeBSD__)</span>
00053 <span class="preprocessor"></span><span class="comment">// MAC OS X is Free BSD</span>
00054 <span class="preprocessor">#define __FreeBSD__ 5</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00056 <span class="preprocessor"></span>
00057 <span class="preprocessor">#ifdef _WIN32</span>
00058 <span class="preprocessor"></span>
00059 <span class="preprocessor">#ifdef USE_MFC</span>
00060 <span class="preprocessor"></span><span class="preprocessor">#include &lt;afx.h&gt;</span>
00061 <span class="preprocessor">#include &lt;winsock2.h&gt;</span>
00062 <span class="preprocessor">#else</span>
00063 <span class="preprocessor"></span><span class="preprocessor">#include &lt;windows.h&gt;</span>
00064 <span class="preprocessor">#endif</span>
00065 <span class="preprocessor"></span>
00066 <span class="preprocessor">#ifdef _MSC_VER</span>
00067 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable:4800 4355 4146 4251 4996)</span>
00068 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00069 <span class="preprocessor"></span>
00070 <span class="preprocessor">#else</span>
00071 <span class="preprocessor"></span><span class="preprocessor">#ifdef _AIX</span>
00072 <span class="preprocessor"></span><span class="preprocessor">#define INT8_IS_DEFINED</span>
00073 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00074 <span class="preprocessor"></span><span class="preprocessor">#ifndef NO_PTHREADS</span>
00075 <span class="preprocessor"></span><span class="preprocessor">#ifndef _REENTRANT</span>
00076 <span class="preprocessor"></span><span class="preprocessor">#define _REENTRANT </span>
00077 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00078 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00079 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00080 <span class="preprocessor"></span>
00081 <span class="preprocessor">#if defined(__VACPP_MULTI__) // IBM compiler produce a lot of stupid warnings</span>
00082 <span class="preprocessor"></span><span class="preprocessor">#pragma report(disable, "CPPC1608")</span>
00083 <span class="preprocessor"></span><span class="preprocessor">#pragma report(disable, "CPPC1281")</span>
00084 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* __VACPP_MULTI__ */</span>
00085 
00086 
00087 <span class="preprocessor">#ifdef _WINCE</span>
00088 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span>
00089 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00090 <span class="preprocessor">#include &lt;string.h&gt;</span>
00091 <span class="preprocessor">#include &lt;limits.h&gt;</span>
00092 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00093 <span class="preprocessor">#include &lt;tchar.h&gt;</span>
00094 <span class="preprocessor">#include "wince.h"</span>
00095 
00096 <span class="preprocessor">#else</span>
00097 <span class="preprocessor"></span>
00098 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00099 <span class="preprocessor">#include &lt;stddef.h&gt;</span>
00100 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00101 <span class="preprocessor">#include &lt;string.h&gt;</span>
00102 <span class="preprocessor">#include &lt;limits.h&gt;</span>
00103 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00104 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00105 <span class="preprocessor">#include &lt;time.h&gt;</span>
00106 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
00107 
00108 <span class="preprocessor">#ifdef _WIN32</span>
00109 <span class="preprocessor"></span><span class="preprocessor">#include &lt;malloc.h&gt;</span>
00110 <span class="preprocessor">#endif</span>
00111 <span class="preprocessor"></span>
00112 <span class="preprocessor">#endif</span>
00113 <span class="preprocessor"></span>
00114 <span class="preprocessor">#ifdef PHAR_LAP</span>
00115 <span class="preprocessor"></span><span class="preprocessor">#define PHAR_LAP 1</span>
00116 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00117 <span class="preprocessor"></span>
00118 <span class="preprocessor">#ifdef __QNX__</span>
00119 <span class="preprocessor"></span><span class="preprocessor">#define USE_POSIX_API 1</span>
00120 <span class="preprocessor"></span><span class="preprocessor">#define POSIX_1003_1d 1</span>
00121 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00122 <span class="preprocessor"></span>
00123 <span class="preprocessor">#if defined(__MINGW32__) &amp;&amp; !defined(_WIN32)</span>
00124 <span class="preprocessor"></span><span class="preprocessor">#define _WIN32</span>
00125 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00126 <span class="preprocessor"></span>
00127 <span class="preprocessor">#if defined(__APPLE__) &amp;&amp; !defined(__FreeBSD__)</span>
00128 <span class="preprocessor"></span><span class="comment">// MAC OS X is Free BSD</span>
00129 <span class="preprocessor">#define __FreeBSD__ 4</span>
00130 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00131 <span class="preprocessor"></span>
00132 <span class="preprocessor">#ifndef CLI_CALLBACK_CC </span><span class="comment">/* CLI callbacks calling convention */</span>
00133 <span class="preprocessor">#define CLI_CALLBACK_CC</span>
00134 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00135 <span class="preprocessor"></span>
00136 <span class="preprocessor">#define DEBUG_NONE            0</span>
00137 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_CHECK           1</span>
00138 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_IMPORTANT 2</span>
00139 <span class="preprocessor"></span><span class="preprocessor">#define DEBUG_TRACE_ALL       3</span>
00140 <span class="preprocessor"></span>
00141 <span class="preprocessor">#if FASTDB_DEBUG &gt;= DEBUG_TRACE_IMPORTANT</span>
00142 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_IMSG(x)  dbTrace x</span>
00143 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00144 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_IMSG(x)</span>
00145 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00146 <span class="preprocessor"></span>
00147 <span class="preprocessor">#if FASTDB_DEBUG &gt;= DEBUG_TRACE_ALL</span>
00148 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_MSG(x)  dbTrace x</span>
00149 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00150 <span class="preprocessor"></span><span class="preprocessor">#define TRACE_MSG(x)</span>
00151 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00152 <span class="preprocessor"></span>
00153 <span class="preprocessor">#ifndef EXTRA_DEBUG_NEW_PARAMS</span>
00154 <span class="preprocessor"></span><span class="preprocessor">#define EXTRA_DEBUG_NEW_PARAMS</span>
00155 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00156 <span class="preprocessor"></span>
00157 
00158 <span class="preprocessor">#ifndef HAS_TEMPLATE_FRIENDS</span>
00159 <span class="preprocessor"></span><span class="preprocessor">#if (!defined(_MSC_VER) || _MSC_VER &gt;= 1300) &amp;&amp; !defined(NO_MEMBER_TEMPLATES)</span>
00160 <span class="preprocessor"></span><span class="preprocessor">#define HAS_TEMPLATE_FRIENDS</span>
00161 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00162 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00163 <span class="preprocessor"></span>
00164 <span class="preprocessor">#ifndef __IBMCPP__</span>
00165 <span class="preprocessor"></span>BEGIN_FASTDB_NAMESPACE
00166 <span class="preprocessor">#endif</span>
00167 <span class="preprocessor"></span>
00168 <span class="comment">// User defined trace functions</span>
00169 <span class="keyword">typedef</span> void (CLI_CALLBACK_CC *dbTraceFunctionPtr)(<span class="keywordtype">char</span>* message);
00170 
00171 <span class="comment">// Pointer to trace function (default implementation just prints message to stderr)</span>
00172 <span class="keyword">extern</span> FASTDB_DLL_ENTRY dbTraceFunctionPtr dbTraceFunction;
00173 
00174 <span class="keyword">extern</span> FASTDB_DLL_ENTRY <span class="keywordtype">void</span> dbTrace(<span class="keywordtype">char</span>* message, ...);
00175 
00176 <span class="preprocessor">#if defined(_WINCE) || defined(UNICODE)</span>
00177 <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">wchar_t</span>* convertStringToUnicode(<span class="keywordtype">wchar_t</span>* dst, <span class="keywordtype">char</span> <span class="keyword">const</span>* src, size_t size) {
00178         mbstowcs(dst, src, size);
00179         <span class="keywordflow">return</span> dst;
00180 }
00181 <span class="preprocessor">#define CNV_BUF_SIZE 256</span>
00182 <span class="preprocessor"></span><span class="preprocessor">#define W32_STRING(s) (s == NULL ? (wchar_t*)NULL : convertStringToUnicode((wchar_t*)alloca(sizeof(wchar_t)*CNV_BUF_SIZE), s, CNV_BUF_SIZE))</span>
00183 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00184 <span class="preprocessor"></span><span class="preprocessor">#define W32_STRING(s) s</span>
00185 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00186 <span class="preprocessor"></span>
00187 
00188 <span class="comment">// Align value 'x' to boundary 'b' which should be power of 2</span>
00189 <span class="preprocessor">#define DOALIGN(x,b)   (((x) + (b) - 1) &amp; ~((b) - 1))</span>
00190 <span class="preprocessor"></span>
00191 <span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span>    db_int1;
00192 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  db_nat1;
00193 
00194 <span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">short</span>   db_int2;
00195 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> db_nat2;
00196 
00197 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  db_byte;
00198 
00199 <span class="preprocessor">#if defined(_WIN32) &amp;&amp; !defined(__MINGW32__)</span>
00200 <span class="preprocessor"></span><span class="preprocessor">#if defined(_MSC_VER) || _MSC_VER &lt; 1300</span>
00201 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">signed</span>   <span class="keywordtype">int</span> db_int4;
00202 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> db_nat4;
00203 <span class="preprocessor">#else</span>
00204 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">signed</span>   __int32 db_int4;
00205 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int32 db_nat4;
00206 <span class="preprocessor">#endif</span>
00207 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int64 db_nat8;
00208 <span class="keyword">typedef</span> <span class="keywordtype">signed</span>   __int64 db_int8;
00209 <span class="preprocessor">#if defined(__IBMCPP__)</span>
00210 <span class="preprocessor"></span><span class="preprocessor">#define INT8_FORMAT "%lld"</span>
00211 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00212 <span class="preprocessor"></span><span class="preprocessor">#define INT8_FORMAT "%I64d"</span>
00213 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00214 <span class="preprocessor"></span><span class="preprocessor">#define CONST64(c)  c</span>
00215 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00216 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">int</span>    db_int4;
00217 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  db_nat4;
00218 <span class="preprocessor">#if defined(__osf__ )</span>
00219 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> db_nat8;
00220 <span class="keyword">typedef</span> <span class="keywordtype">signed</span>   <span class="keywordtype">long</span> db_int8;
00221 <span class="preprocessor">#define INT8_FORMAT "%ld"</span>
00222 <span class="preprocessor"></span><span class="preprocessor">#define CONST64(c)  c##L</span>
00223 <span class="preprocessor"></span><span class="preprocessor">#ifndef SIZEOF_LONG</span>
00224 <span class="preprocessor"></span><span class="preprocessor">#define SIZEOF_LONG 8</span>
00225 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00226 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00227 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> db_nat8;
00228 <span class="keyword">typedef</span> <span class="keywordtype">signed</span>   <span class="keywordtype">long</span> <span class="keywordtype">long</span> db_int8;
00229 <span class="preprocessor">#if defined(__MINGW32__) &amp;&amp; __GNUG__&lt;3</span>
00230 <span class="preprocessor"></span><span class="preprocessor">#define INT8_FORMAT "%I64d"</span>
00231 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00232 <span class="preprocessor"></span><span class="preprocessor">#define INT8_FORMAT "%lld"</span>
00233 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00234 <span class="preprocessor"></span><span class="preprocessor">#define CONST64(c)  c##LL</span>
00235 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00236 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span>
00238 <span class="comment">// This mapping is done for compatibility reasons</span>
00239 <span class="keyword">typedef</span> db_int1 int1;
00240 <span class="keyword">typedef</span> db_nat1 nat1;
00241 <span class="keyword">typedef</span> db_int2 int2;
00242 <span class="keyword">typedef</span> db_nat2 nat2;
00243 <span class="keyword">typedef</span> db_int4 int4;
00244 <span class="keyword">typedef</span> db_nat4 nat4;
00245 
00246 <span class="keyword">typedef</span> db_byte byte;
00247 
00248 <span class="preprocessor">#ifndef INT8_IS_DEFINED</span>
00249 <span class="preprocessor"></span><span class="keyword">typedef</span> db_int8 int8;
00250 <span class="preprocessor">#endif</span>
00251 <span class="preprocessor"></span><span class="keyword">typedef</span> db_nat8 nat8;
00252 
00253 <span class="keyword">typedef</span> <span class="keywordtype">float</span>  real4;
00254 <span class="keyword">typedef</span> <span class="keywordtype">double</span> real8; 
00255 
00256 
00257 <span class="comment">// Starting from which version IBM C++ compiler support bool type?</span>
00258 <span class="comment">//#if !defined(bool) &amp;&amp; ((defined(__SUNPRO_CC) &amp;&amp; __SUNPRO_CC_COMPAT &lt; 5) || defined(__IBMCPP__))</span>
00259 <span class="preprocessor">#if !defined(bool) &amp;&amp; (defined(__SUNPRO_CC) &amp;&amp; __SUNPRO_CC_COMPAT &lt; 5)</span>
00260 <span class="preprocessor"></span><span class="preprocessor">#define bool  char</span>
00261 <span class="preprocessor"></span><span class="preprocessor">#define true  (1)</span>
00262 <span class="preprocessor"></span><span class="preprocessor">#define false (0)</span>
00263 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00264 <span class="preprocessor"></span>
00265 <span class="preprocessor">#define nat8_low_part(x)  ((db_nat4)(x))</span>
00266 <span class="preprocessor"></span><span class="preprocessor">#define int8_low_part(x)  ((db_int4)(x))</span>
00267 <span class="preprocessor"></span><span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; _MSC_VER &lt; 1300 // bug in MVC 6.0</span>
00268 <span class="preprocessor"></span><span class="preprocessor">#define nat8_high_part(x) (sizeof(x) &lt; 8 ? 0 : ((db_nat4)((db_nat8)(x)&gt;&gt;32)))</span>
00269 <span class="preprocessor"></span><span class="preprocessor">#define int8_high_part(x) (sizeof(x) &lt; 8 ? 0 : ((db_int4)((db_int8)(x)&gt;&gt;32)))</span>
00270 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00271 <span class="preprocessor"></span><span class="preprocessor">#define nat8_high_part(x) ((db_nat4)((db_nat8)(x)&gt;&gt;32))</span>
00272 <span class="preprocessor"></span><span class="preprocessor">#define int8_high_part(x) ((db_int4)((db_int8)(x)&gt;&gt;32))</span>
00273 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00274 <span class="preprocessor"></span>
00275 <span class="preprocessor">#define cons_nat8(hi, lo) ((((nat8)(hi)) &lt;&lt; 32) | (nat4)(lo))</span>
00276 <span class="preprocessor"></span><span class="preprocessor">#define cons_int8(hi, lo) ((((db_int8)(hi)) &lt;&lt; 32) | (nat4)(lo))</span>
00277 <span class="preprocessor"></span> 
00278 <span class="preprocessor">#define MAX_NAT8  nat8(-1)</span>
00279 <span class="preprocessor"></span>
00280 <span class="preprocessor">#ifndef BIG_ENDIAN</span>
00281 <span class="preprocessor"></span><span class="preprocessor">#define BIG_ENDIAN      4321    </span><span class="comment">/* most-significant byte first (IBM, net) */</span>
00282 <span class="preprocessor">#endif</span>
00283 <span class="preprocessor"></span><span class="preprocessor">#ifndef LITTLE_ENDIAN</span>
00284 <span class="preprocessor"></span><span class="preprocessor">#define LITTLE_ENDIAN   1234</span>
00285 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00286 <span class="preprocessor"></span>
00287 <span class="preprocessor">#ifndef BYTE_ORDER</span>
00288 <span class="preprocessor"></span><span class="preprocessor">#if defined(__sparc__) || defined(__m68k__)</span>
00289 <span class="preprocessor"></span><span class="preprocessor">#define BYTE_ORDER      BIG_ENDIAN </span>
00290 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00291 <span class="preprocessor"></span><span class="preprocessor">#define BYTE_ORDER      LITTLE_ENDIAN</span>
00292 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00293 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00294 <span class="preprocessor"></span>
00295 <span class="preprocessor">#ifdef _WIN32</span>
00296 <span class="preprocessor"></span><span class="keyword">typedef</span> HANDLE descriptor_t; 
00297 <span class="preprocessor">#else</span>
00298 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">int</span> descriptor_t; 
00299 <span class="preprocessor">#endif</span>
00300 <span class="preprocessor"></span>
00301 <span class="preprocessor">#if !defined(_fastcall) &amp;&amp; (!defined(_WIN32) || defined(__IBMCPP__) || defined(__MINGW32__))</span>
00302 <span class="preprocessor"></span><span class="preprocessor">#define _fastcall</span>
00303 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00304 <span class="preprocessor"></span>
00305 <span class="preprocessor">#if defined(_WIN32) || !defined(NO_PTHREADS)</span>
00306 <span class="preprocessor"></span><span class="preprocessor">#define THREADS_SUPPORTED 1</span>
00307 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00308 <span class="preprocessor"></span><span class="preprocessor">#define THREADS_SUPPORTED 0</span>
00309 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00310 <span class="preprocessor"></span>
00311 <span class="preprocessor">#define itemsof(array) (sizeof(array)/sizeof*(array))</span>
00312 <span class="preprocessor"></span>
00313 <span class="comment">// Enable or disable trace at runtime</span>
00314 <span class="keyword">extern</span> FASTDB_DLL_ENTRY <span class="keywordtype">bool</span> dbTraceEnable;
00315 
00316 <span class="keyword">extern</span> FASTDB_DLL_ENTRY byte* dbMalloc(size_t size);
00317 <span class="keyword">extern</span> FASTDB_DLL_ENTRY <span class="keywordtype">void</span>  dbFree(<span class="keywordtype">void</span>* ptr);
00318 
00319 <span class="preprocessor">#if defined(FUZZY_CHECKPOINT) &amp;&amp; !defined(NO_MMAP)</span>
00320 <span class="preprocessor"></span><span class="preprocessor">#define NO_MMAP 1</span>
00321 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00322 <span class="preprocessor"></span>
00323 <span class="preprocessor">#if !defined(USE_POSIX_MMAP) &amp;&amp; defined(DISKLESS_CONFIGURATION)</span>
00324 <span class="preprocessor"></span><span class="comment">// To enable sharing of database in diskless configuration we have to use</span>
00325 <span class="comment">// shmap instead of mmap, which anonymous region is private to process.</span>
00326 <span class="preprocessor">#define USE_POSIX_MMAP 0</span>
00327 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00328 <span class="preprocessor"></span>
00329 <span class="preprocessor">#if defined(USE_POSIX_MMAP) &amp;&amp; !USE_POSIX_MMAP</span>
00330 <span class="preprocessor"></span><span class="comment">// allocate space for the database using Sys-V shmat</span>
00331 <span class="preprocessor">#define USE_SYSV_SHARED_MEMORY 1</span>
00332 <span class="preprocessor"></span><span class="preprocessor">#if !defined(NO_MMAP) &amp;&amp; !defined(DISKLESS_CONFIGURATION)</span>
00333 <span class="preprocessor"></span><span class="preprocessor">#define NO_MMAP 1</span>
00334 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00335 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00336 <span class="preprocessor"></span>
00337 <span class="preprocessor">#if !defined(_WIN32)</span>
00338 <span class="preprocessor"></span><span class="preprocessor">#define NO_STRICMP  1</span>
00339 <span class="preprocessor"></span><span class="preprocessor">#define NO_STRICOLL 1</span>
00340 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00341 <span class="preprocessor"></span>
00342 
00343 <span class="preprocessor">#if defined(_WINCE) &amp;&amp; defined(USE_LOCALE_SETTINGS)</span>
00344 <span class="preprocessor"></span><span class="preprocessor">#undef USE_LOCALE_SETTINGS</span>
00345 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00346 <span class="preprocessor"></span>
00347 <span class="preprocessor">#if defined(IGNORE_CASE) &amp;&amp; defined(NO_STRICMP)</span>
00348 <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">int</span> stricmp(<span class="keyword">const</span> <span class="keywordtype">char</span>* p, <span class="keyword">const</span> <span class="keywordtype">char</span>* q)
00349 {
00350     <span class="keywordflow">while</span> (toupper(*(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)p) == toupper(*(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)q)) { 
00351         <span class="keywordflow">if</span> (*p == <span class="charliteral">'\0'</span>) { 
00352             <span class="keywordflow">return</span> 0;
00353         }
00354         p += 1;
00355         q += 1;
00356     }
00357     <span class="keywordflow">return</span> toupper(*(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)p) - toupper(*(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)q);
00358 }
00359 <span class="preprocessor">#else</span>
00360 <span class="preprocessor"></span><span class="preprocessor">#ifdef _WIN32</span>
00361 <span class="preprocessor"></span><span class="preprocessor">#define stricoll(x,y) _stricoll(x,y)</span>
00362 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00363 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00364 <span class="preprocessor"></span>
00365 <span class="preprocessor">#ifndef STRINCMP_DEFINED</span>
00366 <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">int</span> strincmp(<span class="keyword">const</span> <span class="keywordtype">char</span>* p, <span class="keyword">const</span> <span class="keywordtype">char</span>* q, size_t n)
00367 {
00368     <span class="keywordflow">while</span> (n &gt; 0) { 
00369         <span class="keywordtype">int</span> diff = toupper(*(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)p) - toupper(*(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)q);
00370         <span class="keywordflow">if</span> (diff != 0) { 
00371             <span class="keywordflow">return</span> diff;
00372         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == <span class="charliteral">'\0'</span>) { 
00373             <span class="keywordflow">return</span> 0;
00374         }
00375         p += 1;
00376         q += 1;
00377         n -= 1; 
00378     }
00379     <span class="keywordflow">return</span> 0;
00380 }
00381 <span class="preprocessor">#endif</span>
00382 <span class="preprocessor"></span>
00383 <span class="preprocessor">#if defined(IGNORE_CASE) &amp;&amp; defined(USE_LOCALE_SETTINGS) &amp;&amp; defined(NO_STRICOLL) </span>
00384 <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">int</span> stricoll(<span class="keyword">const</span> <span class="keywordtype">char</span>* p, <span class="keyword">const</span> <span class="keywordtype">char</span>* q)
00385 {
00386     <span class="keywordtype">char</span>   p_buf[256];
00387     <span class="keywordtype">char</span>   q_buf[256];
00388     size_t p_len = strlen(p);
00389     size_t q_len = strlen(q);
00390     <span class="keywordtype">char</span>*  p_dst = p_buf; 
00391     <span class="keywordtype">char</span>*  q_dst = q_buf; 
00392     <span class="keywordtype">int</span>    i;
00393     <span class="keywordflow">if</span> (p_len &gt;= <span class="keyword">sizeof</span>(p_buf)) { 
00394         p_dst = <span class="keyword">new</span> <span class="keywordtype">char</span>[p_len+1];
00395     }
00396     <span class="keywordflow">if</span> (q_len &gt;= <span class="keyword">sizeof</span>(q_buf)) { 
00397         q_dst = <span class="keyword">new</span> <span class="keywordtype">char</span>[q_len+1];
00398     }
00399     <span class="keywordflow">for</span> (i = 0; p[i] != <span class="charliteral">'\0'</span>; i++) { 
00400         p_dst[i] = toupper(p[i] &amp; 0xFF);
00401     }
00402     p_dst[i] = <span class="charliteral">'\0'</span>;
00403 
00404     <span class="keywordflow">for</span> (i = 0; q[i] != <span class="charliteral">'\0'</span>; i++) { 
00405         q_dst[i] = toupper(q[i] &amp; 0xFF);
00406     }
00407     q_dst[i] = <span class="charliteral">'\0'</span>;
00408 
00409     <span class="keywordtype">int</span> diff = strcoll(p_dst, q_dst);
00410     <span class="keywordflow">if</span> (p_dst != p_buf) { 
00411         <span class="keyword">delete</span>[] p_dst;
00412     }
00413     <span class="keywordflow">if</span> (q_dst != q_buf) { 
00414         <span class="keyword">delete</span>[] q_dst;
00415     }
00416     <span class="keywordflow">return</span> diff;
00417 }
00418 <span class="preprocessor">#endif</span>
00419 <span class="preprocessor"></span>
00420 <span class="preprocessor">#ifndef __IBMCPP__</span>
00421 <span class="preprocessor"></span>END_FASTDB_NAMESPACE
00422 <span class="preprocessor">#endif</span>
00423 <span class="preprocessor"></span>
00424 <span class="preprocessor">#endif</span>
00425 <span class="preprocessor"></span>
00426 
00427 
00428 
</pre></div><hr><address style="align: right;"><small>Generated on Thu Feb 14 12:42:30 2008 for FastDB by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
