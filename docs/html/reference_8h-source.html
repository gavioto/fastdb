<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reference.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>reference.h</h1><div class="fragment"><pre>00001 <span class="comment">//-&lt; REFERENCE.H &gt;---------------------------------------------------*--------*</span>
00002 <span class="comment">// FastDB                    Version 1.0         (c) 1999  GARRET    *     ?  *</span>
00003 <span class="comment">// (Main Memory Database Management System)                          *   /\|  *</span>
00004 <span class="comment">//                                                                   *  /  \  *</span>
00005 <span class="comment">//                          Created:     20-Nov-98    K.A. Knizhnik  * / [] \ *</span>
00006 <span class="comment">//                          Last update: 15-Feb-99    K.A. Knizhnik  * GARRET *</span>
00007 <span class="comment">//-------------------------------------------------------------------*--------*</span>
00008 <span class="comment">// Database table field reference type</span>
00009 <span class="comment">//-------------------------------------------------------------------*--------*</span>
00010 
00011 <span class="preprocessor">#ifndef __REFERENCE_H__</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define __REFERENCE_H__</span>
00013 <span class="preprocessor"></span>
00014 BEGIN_FASTDB_NAMESPACE
00015 
<a name="l00019"></a><a class="code" href="classdbAnyReference.html">00019</a> <span class="keyword">class </span>FASTDB_DLL_ENTRY <a class="code" href="classdbAnyReference.html">dbAnyReference</a> {  
00020     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classdbAnyCursor.html">dbAnyCursor</a>;
00021     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classdbDatabase.html">dbDatabase</a>;
00022     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classdbFieldDescriptor.html">dbFieldDescriptor</a>;
00023   <span class="keyword">protected</span>:
00024     oid_t       oid;
00025 
00026   <span class="keyword">public</span>: 
00027     <a class="code" href="classdbAnyReference.html">dbAnyReference</a>(oid_t oid = 0) { 
00028         this-&gt;oid = oid;
00029     }
<a name="l00034"></a><a class="code" href="classdbAnyReference.html#dbReferencea13">00034</a>     oid_t getOid()<span class="keyword"> const </span>{ 
00035         <span class="keywordflow">return</span> oid;
00036     }
00037 
<a name="l00041"></a><a class="code" href="classdbAnyReference.html#dbReferencel0">00041</a>     <span class="keyword">friend</span> <span class="keywordtype">bool</span> isNull(<a class="code" href="classdbAnyReference.html">dbAnyReference</a> <span class="keyword">const</span>&amp; ref) { 
00042         <span class="keywordflow">return</span> ref.<a class="code" href="classdbAnyReference.html#dbReferencen0">oid</a> == 0; 
00043     }
00044     
<a name="l00048"></a><a class="code" href="classdbAnyReference.html#dbReferencea14">00048</a>     <span class="keywordtype">bool</span> isNull()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> oid == 0; }
00049 
00050     <a class="code" href="classdbFieldDescriptor.html">dbFieldDescriptor</a>* dbDescribeComponents(<a class="code" href="classdbFieldDescriptor.html">dbFieldDescriptor</a>* fd) {
00051         fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm14">type</a> = fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm15">appType</a> = dbField::tpReference;
00052         fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm10">refTable</a> = NULL;
00053         fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm22">dbsSize</a> = fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm24">alignment</a> = <span class="keyword">sizeof</span>(oid_t);
00054         <span class="keywordflow">return</span> NULL;
00055     }
00056 };
00057 
<a name="l00061"></a><a class="code" href="classdbNullReference.html">00061</a> <span class="keyword">class </span>FASTDB_DLL_ENTRY dbNullReference {};
00062 
00066 <span class="keyword">extern</span> FASTDB_DLL_ENTRY dbNullReference null;
00067 
00068 <span class="preprocessor">#if (defined(_MSC_VER) &amp;&amp; (_MSC_VER+0 &lt; 1200 || _MSC_VER &gt;= 1310)) || defined(__MWERKS__)</span>
00069 <span class="preprocessor"></span><span class="comment">//</span>
00070 <span class="comment">// Visual C++ prior to 5.0 version (with applied Service Pack 3)</span>
00071 <span class="comment">// didn't support lazy template instantiation. As far as VC has bug</span>
00072 <span class="comment">// with treating local function prototypes, we have to use friend function.</span>
00073 <span class="comment">//</span>
00074 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
00075 <span class="keyword">extern</span> <a class="code" href="classdbTableDescriptor.html">dbTableDescriptor</a>* dbGetTableDescriptor(T*);
00076 <span class="preprocessor">#endif</span>
00077 <span class="preprocessor"></span>
00078 
00082 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00083"></a><a class="code" href="classdbReference.html">00083</a> <span class="keyword">class </span><a class="code" href="classdbReference.html">dbReference</a> : <span class="keyword">public</span> <a class="code" href="classdbAnyReference.html">dbAnyReference</a> { 
00084   <span class="keyword">public</span>:
<a name="l00088"></a><a class="code" href="classdbReference.html#dbReferencea0">00088</a>     <a class="code" href="classdbFieldDescriptor.html">dbFieldDescriptor</a>* <a class="code" href="classdbReference.html#dbReferencea0">dbDescribeComponents</a>(<a class="code" href="classdbFieldDescriptor.html">dbFieldDescriptor</a>* fd) { 
00089         fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm14">type</a> = fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm15">appType</a> = dbField::tpReference;
00090 <span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; (_MSC_VER+0 &lt; 1200 || _MSC_VER &gt;= 1310) || defined(__MWERKS__)</span>
00091 <span class="preprocessor"></span>        fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm10">refTable</a> = dbGetTableDescriptor((T*)0);
00092 <span class="preprocessor">#else</span>
00093 <span class="preprocessor"></span><span class="preprocessor">#if GNUC_BEFORE(2,96) || defined(__VACPP_MULTI__) || defined(__IBMCPP__)</span>
00094 <span class="preprocessor"></span>        <span class="keyword">extern</span> <a class="code" href="classdbTableDescriptor.html">dbTableDescriptor</a>* dbGetTableDescriptor(T*);
00095         fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm10">refTable</a> = dbGetTableDescriptor((T*)0);
00096 <span class="preprocessor">#else</span>
00097 <span class="preprocessor"></span>        fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm10">refTable</a> = &amp;T::dbDescriptor;
00098 <span class="preprocessor">#endif</span>
00099 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00100 <span class="preprocessor"></span>        fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm22">dbsSize</a> = fd-&gt;<a class="code" href="classdbFieldDescriptor.html#dbFieldDescriptorm24">alignment</a> = <span class="keyword">sizeof</span>(oid_t);
00101         <span class="keywordflow">return</span> NULL;
00102     }
00103 
<a name="l00109"></a><a class="code" href="classdbReference.html#dbReferencea1">00109</a>     <a class="code" href="classdbReference.html">dbReference</a>&amp; <a class="code" href="classdbReference.html#dbReferencea1">operator = </a>(<a class="code" href="classdbReference.html">dbReference</a> <span class="keyword">const</span>&amp; ref) { 
00110         oid = ref.<a class="code" href="classdbAnyReference.html#dbReferencen0">oid</a>;
00111         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00112     }
00113 
<a name="l00118"></a><a class="code" href="classdbReference.html#dbReferencea2">00118</a>     <a class="code" href="classdbReference.html">dbReference</a>&amp; <a class="code" href="classdbReference.html#dbReferencea1">operator = </a>(dbNullReference <span class="keyword">const</span>&amp;) { 
00119         oid = 0;
00120         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00121     }
00122 
<a name="l00128"></a><a class="code" href="classdbReference.html#dbReferencea3">00128</a>     <a class="code" href="classdbReference.html">dbReference&lt;T&gt;</a>&amp; <a class="code" href="classdbReference.html#dbReferencea3">unsafeAssign</a>(<a class="code" href="classdbAnyReference.html">dbAnyReference</a> <span class="keyword">const</span>&amp; ref) {
00129         oid = ref.<a class="code" href="classdbAnyReference.html#dbReferencea13">getOid</a>();
00130         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00131     }
00132  
<a name="l00136"></a><a class="code" href="classdbReference.html#dbReferencea4">00136</a>     <span class="keywordtype">bool</span> <a class="code" href="classdbReference.html#dbReferencea4">operator == </a>(<a class="code" href="classdbReference.html">dbReference</a> <span class="keyword">const</span>&amp; ref)<span class="keyword"> const </span>{ 
00137         <span class="keywordflow">return</span> oid == ref.<a class="code" href="classdbAnyReference.html#dbReferencen0">oid</a>; 
00138     }
00139 
<a name="l00143"></a><a class="code" href="classdbReference.html#dbReferencea5">00143</a>     <span class="keywordtype">bool</span> <a class="code" href="classdbReference.html#dbReferencea5">operator &gt; </a>(<a class="code" href="classdbReference.html">dbReference</a> <span class="keyword">const</span>&amp; ref)<span class="keyword"> const </span>{ 
00144         <span class="keywordflow">return</span> oid &gt; ref.<a class="code" href="classdbAnyReference.html#dbReferencen0">oid</a>; 
00145     }
00146 
<a name="l00150"></a><a class="code" href="classdbReference.html#dbReferencea6">00150</a>     <span class="keywordtype">bool</span> <a class="code" href="classdbReference.html#dbReferencea6">operator &lt; </a>(<a class="code" href="classdbReference.html">dbReference</a> <span class="keyword">const</span>&amp; ref)<span class="keyword"> const </span>{ 
00151         <span class="keywordflow">return</span> oid &lt; ref.<a class="code" href="classdbAnyReference.html#dbReferencen0">oid</a>; 
00152     }
00153 
<a name="l00157"></a><a class="code" href="classdbReference.html#dbReferencea7">00157</a>     <span class="keywordtype">bool</span> <a class="code" href="classdbReference.html#dbReferencea7">operator != </a>(<a class="code" href="classdbReference.html">dbReference</a> <span class="keyword">const</span>&amp; ref)<span class="keyword"> const </span>{ 
00158         <span class="keywordflow">return</span> oid != ref.<a class="code" href="classdbAnyReference.html#dbReferencen0">oid</a>; 
00159     }
00160 
<a name="l00164"></a><a class="code" href="classdbReference.html#dbReferencea8">00164</a>     <span class="keywordtype">bool</span> <a class="code" href="classdbReference.html#dbReferencea4">operator == </a>(dbNullReference <span class="keyword">const</span>&amp;)<span class="keyword"> const </span>{ 
00165         <span class="keywordflow">return</span> oid == 0;
00166     }
00167 
<a name="l00171"></a><a class="code" href="classdbReference.html#dbReferencea9">00171</a>     <span class="keywordtype">bool</span> <a class="code" href="classdbReference.html#dbReferencea7">operator != </a>(dbNullReference <span class="keyword">const</span>&amp;)<span class="keyword"> const </span>{ 
00172         <span class="keywordflow">return</span> oid != 0;
00173     }
00174 
<a name="l00178"></a><a class="code" href="classdbReference.html#dbReferencea10">00178</a>     <a class="code" href="classdbReference.html#dbReferencea10">dbReference</a>(dbNullReference <span class="keyword">const</span>&amp;) : <a class="code" href="classdbAnyReference.html">dbAnyReference</a>(0) {}
00179 
<a name="l00183"></a><a class="code" href="classdbReference.html#dbReferencea11">00183</a>     <a class="code" href="classdbReference.html#dbReferencea10">dbReference</a>(<a class="code" href="classdbReference.html">dbReference</a> <span class="keyword">const</span>&amp; ref) : <a class="code" href="classdbAnyReference.html">dbAnyReference</a>(ref.oid) {}
00184     
<a name="l00191"></a><a class="code" href="classdbReference.html#dbReferencea12">00191</a>     <a class="code" href="classdbReference.html#dbReferencea10">dbReference</a>(oid_t oid=0) : <a class="code" href="classdbAnyReference.html">dbAnyReference</a>(oid) {}
00192 };
00193 
00194 END_FASTDB_NAMESPACE
00195 
00196 <span class="preprocessor">#endif</span>
00197 <span class="preprocessor"></span>
00198 
00199 
00200 
00201 
</pre></div><hr><address style="align: right;"><small>Generated on Thu Feb 14 12:42:30 2008 for FastDB by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
