<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FastDB: clidb.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>clidb.h</h1><div class="fragment"><pre>00001 <span class="comment">//-&lt; CLIDB.H &gt;-------------------------------------------------------*--------*</span>
00002 <span class="comment">// FastDB                    Version 1.0         (c) 1999  GARRET    *     ?  *</span>
00003 <span class="comment">// (Main Memory Database Management System)                          *   /\|  *</span>
00004 <span class="comment">//                                                                   *  /  \  *</span>
00005 <span class="comment">//                          Created:      7-Nov-99    K.A. Knizhnik  * / [] \ *</span>
00006 <span class="comment">//                          Last update:  7-Nov-99    K.A. Knizhnik  * GARRET *</span>
00007 <span class="comment">//-------------------------------------------------------------------*--------*</span>
00008 <span class="comment">// Example of Web database publishing: Clients Database</span>
00009 <span class="comment">//-------------------------------------------------------------------*--------*</span>
00010 
00011 <span class="preprocessor">#ifndef __CLIDB_H__</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define __CLIDB_H__</span>
00013 <span class="preprocessor"></span>
00014 <span class="preprocessor">#include "fastdb.h"</span>
00015 <span class="preprocessor">#include "wwwapi.h"</span>
00016 
00017 <span class="keyword">class </span>History;
00018 <span class="keyword">class </span>Manager;
00019 <span class="keyword">class </span>Segment;
00020 
00021 <span class="keyword">class </span>Client { 
00022   <span class="keyword">public</span>:
00023     <span class="keywordtype">char</span> <span class="keyword">const</span>* organization;
00024     <span class="keywordtype">char</span> <span class="keyword">const</span>* phone;
00025     <span class="keywordtype">char</span> <span class="keyword">const</span>* phone2;
00026     <span class="keywordtype">char</span> <span class="keyword">const</span>* fax;
00027     <span class="keywordtype">char</span> <span class="keyword">const</span>* email;
00028     <span class="keywordtype">char</span> <span class="keyword">const</span>* www;
00029     <span class="keywordtype">char</span> <span class="keyword">const</span>* person;
00030     <span class="keywordtype">char</span> <span class="keyword">const</span>* person2;
00031     <span class="keywordtype">char</span> <span class="keyword">const</span>* lpr;
00032     <span class="keywordtype">char</span> <span class="keyword">const</span>* addr;
00033     <span class="keywordtype">char</span> <span class="keyword">const</span>* info;
00034     <span class="keywordtype">char</span> <span class="keyword">const</span>* status;
00035     <span class="keywordtype">int</span>         clientId;
00036     <a class="code" href="classdbReference.html">dbReference&lt;Segment&gt;</a> segment;
00037     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;History&gt;</a> &gt; history;
00038 
00039     <span class="keywordtype">void</span> print(WWWconnection&amp; con) <span class="keyword">const</span>;
00040     
00041     TYPE_DESCRIPTOR((KEY(clientId, INDEXED),
00042                      FIELD(organization),
00043                      FIELD(phone),
00044                      FIELD(phone2),
00045                      FIELD(fax),
00046                      FIELD(email),
00047                      FIELD(www),
00048                      FIELD(person),
00049                      FIELD(person2),
00050                      FIELD(lpr),
00051                      FIELD(addr),
00052                      FIELD(info),
00053                      FIELD(status),
00054                      RELATION(segment, clients),
00055                      OWNER(history, client)));
00056 };
00057 
00058 <span class="keyword">class </span>History { 
00059   <span class="keyword">public</span>:
00060     <span class="keywordtype">int</span>         messageId;
00061     <span class="keywordtype">char</span> <span class="keyword">const</span>* message;
00062     dbDateTime  date;
00063     <a class="code" href="classdbReference.html">dbReference&lt;Manager&gt;</a> manager;
00064     <a class="code" href="classdbReference.html">dbReference&lt;Client&gt;</a>  client;
00065     
00066     <span class="keywordtype">void</span> print(WWWconnection&amp; con) <span class="keyword">const</span>;
00067 
00068     TYPE_DESCRIPTOR((KEY(messageId, INDEXED),
00069                      FIELD(message),
00070                      FIELD(date),
00071                      RELATION(client, history),
00072                      RELATION(manager, messages)));
00073 };
00074 
00075 <span class="keyword">class </span>Manager { 
00076   <span class="keyword">public</span>:
00077     <span class="keywordtype">char</span> <span class="keyword">const</span>* name;
00078     <span class="keywordtype">char</span> <span class="keyword">const</span>* IPaddr;
00079     <span class="keywordtype">int</span>         flags;
00080     <a class="code" href="classdbReference.html">dbReference&lt;Segment&gt;</a> segment;
00081     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;History&gt;</a> &gt; messages;
00082 
00083     <span class="keyword">static</span> <span class="keywordtype">bool</span> loginFromAnyHost;
00084 
00085     <span class="keyword">enum</span> { 
00086         isMinAdmin      = 1,
00087         isAdministrator = 2
00088     };
00089     
00090     <span class="keywordtype">void</span> print(WWWconnection&amp; con) <span class="keyword">const</span>;
00091 
00092     TYPE_DESCRIPTOR((KEY(name, INDEXED),
00093                      FIELD(IPaddr),
00094                      FIELD(flags),
00095                      RELATION(segment, managers),
00096                      RELATION(messages, manager)));
00097 };
00098 
00099 <span class="keyword">class </span>Segment { 
00100   <span class="keyword">public</span>:
00101     <span class="keywordtype">char</span> <span class="keyword">const</span>* name;
00102     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;Client&gt;</a> &gt;  clients;
00103     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;Manager&gt;</a> &gt; managers;
00104  
00105     <span class="keywordtype">void</span> print(WWWconnection&amp; con) <span class="keyword">const</span>;
00106 
00107     TYPE_DESCRIPTOR((KEY(name, INDEXED),
00108                      OWNER(clients, segment),
00109                      OWNER(managers, segment)));
00110 };
00111 
00112 <span class="keyword">class </span>Sequencer { 
00113   <span class="keyword">public</span>:
00114     <span class="keywordtype">int</span> lastClientId;
00115     <span class="keywordtype">int</span> lastMessageId;
00116 
00117     TYPE_DESCRIPTOR((FIELD(lastClientId),
00118                      FIELD(lastMessageId)));
00119 };
00120 
00121 <span class="keyword">class </span>ThreadContext { 
00122   <span class="keyword">public</span>:
00123     <a class="code" href="classdbCursor.html">dbCursor&lt;Client&gt;</a>  clients;
00124     <a class="code" href="classdbCursor.html">dbCursor&lt;Manager&gt;</a> managers;
00125     <a class="code" href="classdbCursor.html">dbCursor&lt;Segment&gt;</a> segments;
00126     <a class="code" href="classdbCursor.html">dbCursor&lt;History&gt;</a> messages;
00127     <a class="code" href="classdbCursor.html">dbCursor&lt;Sequencer&gt;</a> sequencer;
00128 
00129     <a class="code" href="classdbQuery.html">dbQuery</a> qClient;
00130     <a class="code" href="classdbQuery.html">dbQuery</a> qManager;
00131     <a class="code" href="classdbQuery.html">dbQuery</a> qClients;
00132     <a class="code" href="classdbQuery.html">dbQuery</a> qManagers;
00133     <a class="code" href="classdbQuery.html">dbQuery</a> qSegment;
00134     <a class="code" href="classdbQuery.html">dbQuery</a> qMessage;
00135     <a class="code" href="classdbQuery.html">dbQuery</a> qMessages;
00136     
00137     <span class="keywordtype">bool</span>  managerForm;
00138 
00139     <span class="keywordtype">int</span>   clientId;
00140     <span class="keywordtype">int</span>   messageId;
00141     <span class="keywordtype">char</span>* name;
00142     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;Client&gt;</a> &gt;*  clientsArray;
00143     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;Manager&gt;</a> &gt;* managersArray;
00144     <a class="code" href="classdbArray.html">dbArray&lt;dbReference&lt;History&gt;</a> &gt;* messagesArray;
00145     
00146     ThreadContext();
00147     <span class="keyword">static</span> ThreadContext&amp; of(WWWconnection&amp; con);
00148 };
00149 
00150 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Feb 12 13:04:48 2004 for FastDB by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
